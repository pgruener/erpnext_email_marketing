{
 "actions": [],
 "creation": "2022-07-16 14:43:00.966669",
 "doctype": "DocType",
 "editable_grid": 1,
 "engine": "InnoDB",
 "field_order": [
  "based_on",
  "entry_type",
  "message_channel",
  "description",
  "column_break_1",
  "scheduled_at",
  "schedule_after_days",
  "schedule_after_hours",
  "wait_for_section",
  "wait_for_event_type",
  "wait_for_custom_event",
  "column_break_9",
  "wait_for_event_in_other_campaign",
  "wait_for_event_of_node",
  "wait_event_link_click_pattern",
  "waiting_for_tag",
  "wait_for_group_change",
  "section_combine",
  "combination_operator_1",
  "combination_layer_1",
  "combination_type",
  "column_break_16",
  "combination_operator_2",
  "combination_layer_2",
  "section_break_1",
  "mailform",
  "section_break_2",
  "subject",
  "message_body",
  "attachment",
  "column_break_3",
  "btn_test_email",
  "last_evaluation_at"
 ],
 "fields": [
  {
   "fieldname": "subject",
   "fieldtype": "Data",
   "label": "Subject",
   "mandatory_depends_on": "eval:doc.entry_type === 'Message' && !doc.mailform",
   "read_only_depends_on": "eval:doc.entry_type !== 'Message' || doc.mailform"
  },
  {
   "depends_on": "eval:(doc.entry_type == 'Message' || doc.entry_type == 'Wait') && (!doc.schedule_after_days && !doc.schedule_after_hours)",
   "fieldname": "scheduled_at",
   "fieldtype": "Datetime",
   "in_list_view": 1,
   "label": "Scheduled At"
  },
  {
   "depends_on": "eval:doc.entry_type === 'Message'",
   "fieldname": "column_break_3",
   "fieldtype": "Section Break"
  },
  {
   "fieldname": "attachment",
   "fieldtype": "Attach",
   "label": "Attachment",
   "read_only_depends_on": "eval:doc.mailform"
  },
  {
   "columns": 1,
   "fieldname": "btn_test_email",
   "fieldtype": "Button",
   "in_list_view": 1,
   "label": "Test",
   "precision": "2",
   "read_only_depends_on": "eval:doc.entry_type !== 'Message' && doc.message_channel !== 'Email'"
  },
  {
   "columns": 1,
   "fieldname": "mailform",
   "fieldtype": "Link",
   "label": "Mailform",
   "mandatory_depends_on": "eval:doc.entry_type === 'Message' && !doc.subject",
   "options": "Email Template",
   "read_only_depends_on": "eval:doc.entry_type !== 'Message' || doc.subject"
  },
  {
   "collapsible": 1,
   "collapsible_depends_on": "eval:doc.mailform && doc.entry_type === 'Message'",
   "depends_on": "eval:!doc.mailform && doc.entry_type === 'Message'",
   "fieldname": "section_break_2",
   "fieldtype": "Section Break",
   "label": "Define Inline Message"
  },
  {
   "collapsible": 1,
   "collapsible_depends_on": "eval:doc.subject && doc.entry_type === 'Message'",
   "depends_on": "eval:!doc.subject && doc.entry_type === 'Message'",
   "fieldname": "section_break_1",
   "fieldtype": "Section Break",
   "label": "Choose Message from Template"
  },
  {
   "fieldname": "column_break_1",
   "fieldtype": "Column Break"
  },
  {
   "columns": 2,
   "fieldname": "based_on",
   "fieldtype": "Link",
   "in_list_view": 1,
   "label": "Based On",
   "options": "EmailMktCampaignNode",
   "search_index": 1
  },
  {
   "default": "Message",
   "fieldname": "entry_type",
   "fieldtype": "Select",
   "in_list_view": 1,
   "label": "Type",
   "options": "Message\nRaise Custom Event\nWait\nWait for Event\nCombine\nCreate Event (DocType)",
   "reqd": 1,
   "search_index": 1
  },
  {
   "depends_on": "eval:doc.entry_type === 'Wait for Event'",
   "fieldname": "wait_for_section",
   "fieldtype": "Section Break",
   "label": "Wait for Event"
  },
  {
   "default": "Opened Message",
   "fieldname": "wait_for_event_type",
   "fieldtype": "Link",
   "label": "Wait for Event Type",
   "mandatory_depends_on": "eval:doc.entry_type === 'Wait'",
   "options": "EmailMktEventType"
  },
  {
   "depends_on": "eval:doc.entry_type === 'Wait for Event' && ['Tag added', 'Tag removed'].indexOf(doc.wait_for_event_type) !== -1",
   "fieldname": "waiting_for_tag",
   "fieldtype": "Link",
   "label": "Wait for Tag Event",
   "options": "EmailMktTag"
  },
  {
   "depends_on": "eval:doc.entry_type === 'Wait for Event' && ['Subscribed in Group', 'Unsubscribed from Group'].indexOf(doc.wait_for_event_type) !== -1",
   "fieldname": "wait_for_group_change",
   "fieldtype": "Link",
   "label": "Wait for Group Change",
   "options": "EmailMktSubscriberGroup"
  },
  {
   "depends_on": "eval:doc.entry_type === 'Combine'",
   "fieldname": "section_combine",
   "fieldtype": "Section Break",
   "label": "Combine Section"
  },
  {
   "default": "Does match",
   "fieldname": "combination_operator_1",
   "fieldtype": "Select",
   "label": "Combination Operator 1",
   "options": "Does match\nDoes not match"
  },
  {
   "fieldname": "combination_layer_1",
   "fieldtype": "Link",
   "label": "Combination Layer 1",
   "mandatory_depends_on": "eval: doc.entry_type === 'Combine'",
   "options": "EmailMktCampaignNode"
  },
  {
   "fieldname": "column_break_16",
   "fieldtype": "Column Break"
  },
  {
   "default": "Does match",
   "fieldname": "combination_operator_2",
   "fieldtype": "Select",
   "label": "Combination Operator 2",
   "options": "Does match\nDoes not match"
  },
  {
   "fieldname": "combination_layer_2",
   "fieldtype": "Link",
   "label": "Combination Layer 2",
   "mandatory_depends_on": "eval: doc.entry_type === 'Combine'",
   "options": "EmailMktCampaignNode"
  },
  {
   "fieldname": "column_break_9",
   "fieldtype": "Column Break"
  },
  {
   "fieldname": "description",
   "fieldtype": "Data",
   "in_list_view": 1,
   "label": "Description"
  },
  {
   "fieldname": "last_evaluation_at",
   "fieldtype": "Datetime",
   "hidden": 1,
   "label": "Last evaluation at"
  },
  {
   "default": "And",
   "fieldname": "combination_type",
   "fieldtype": "Select",
   "label": "Combination Type",
   "options": "And\nOr"
  },
  {
   "depends_on": "eval: doc.wait_for_event_type === 'Custom Event'",
   "fieldname": "wait_for_custom_event",
   "fieldtype": "Data",
   "label": "Wait for Custom Event",
   "mandatory_depends_on": "eval: doc.wait_for_event_type === 'Custom Event'"
  },
  {
   "depends_on": "eval:(doc.entry_type == 'Message' || doc.entry_type == 'Wait') && !doc.scheduled_at",
   "fieldname": "schedule_after_days",
   "fieldtype": "Float",
   "in_list_view": 1,
   "label": "Schedule after days",
   "precision": "2"
  },
  {
   "depends_on": "eval:(doc.entry_type == 'Message' || doc.entry_type == 'Wait') && !doc.scheduled_at",
   "fieldname": "schedule_after_hours",
   "fieldtype": "Float",
   "in_list_view": 1,
   "label": "Schedule after hours",
   "precision": "2"
  },
  {
   "depends_on": "eval:doc.entry_type === 'Wait for Event' && ['Clicked Link'].indexOf(doc.wait_for_event_type) !== -1",
   "fieldname": "wait_event_link_click_pattern",
   "fieldtype": "Data",
   "label": "Wait Event Link Click Pattern"
  },
  {
   "fieldname": "message_body",
   "fieldtype": "Text Editor",
   "label": "Message",
   "read_only_depends_on": "eval:doc.entry_type !== 'Message' || doc.mailform"
  },
  {
   "depends_on": "eval:doc.entry_type === 'Wait for Event' && ['Clicked Link', 'Opened Message', 'Message sent'].indexOf(doc.wait_for_event_type) !== -1",
   "fieldname": "wait_for_event_in_other_campaign",
   "fieldtype": "Link",
   "label": "Wait for Event in another Campaign",
   "options": "EmailMktCampaign"
  },
  {
   "depends_on": "eval:doc.entry_type === 'Wait for Event' && ['Clicked Link', 'Opened Message', 'Message sent'].indexOf(doc.wait_for_event_type) !== -1",
   "fieldname": "wait_for_event_of_node",
   "fieldtype": "Link",
   "label": "Wait for Event of Node",
   "options": "EmailMktCampaignNode"
  },
  {
   "depends_on": "eval: doc.entry_type === 'Message'",
   "fieldname": "message_channel",
   "fieldtype": "Select",
   "label": "Message Channel",
   "mandatory_depends_on": "eval: doc.entry_type === 'Message'",
   "options": "Email\nSMS\nWhatsapp\nChat"
  }
 ],
 "istable": 1,
 "links": [],
 "modified": "2023-09-30 16:59:15.492104",
 "modified_by": "Administrator",
 "module": "Email Marketing",
 "name": "EmailMktCampaignNode",
 "owner": "Administrator",
 "permissions": [],
 "search_fields": "entry_type,description,subject",
 "show_title_field_in_link": 1,
 "sort_field": "modified",
 "sort_order": "DESC",
 "states": [],
 "title_field": "description"
}